# –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏ flash_cc2531 —Å wiringPi –Ω–∞ libgpiod

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü—Ä–æ–µ–∫—Ç `flash_cc2531` —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏, –≤–∫–ª—é—á–∞—è Raspberry Pi 5 —Å Bookworm OS, –ø—É—Ç–µ–º –∑–∞–º–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `wiringPi` –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é `libgpiod`.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ GPIO –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `GPIOlibgpiod.h` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GPIO
- `GPIOlibgpiod.c` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Linux –∏ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è macOS

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
```c
int gpio_init(int pinRST, int pinDC, int pinDD);
void gpio_set_mode(int pin, int mode);
void gpio_write(int pin, int value);
int gpio_read(int pin);
void gpio_cleanup(void);
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CCDebugger.c

**–ó–∞–º–µ–Ω–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ wiringPi:**
- `wiringPiSetup()` ‚Üí `gpio_init()`
- `pinMode()` ‚Üí `gpio_set_mode()`
- `digitalWrite()` ‚Üí `gpio_write()`
- `digitalRead()` ‚Üí `gpio_read()`
- `micros()` ‚Üí `clock_gettime(CLOCK_MONOTONIC)`

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤:**
```c
// –í —Ñ—É–Ω–∫—Ü–∏–∏ cc_setActive –ø—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏
gpio_cleanup();
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Makefile

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –û–°:**
```makefile
ifeq ($(UNAME_S),Darwin)
# macOS
LDLIBS=-lm
else
# Linux
LDLIBS=-lgpiod -lcrypt -lm -lrt
endif
```

**–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞:**
- –ö–æ–º–ø–∏–ª—è—Ü–∏—è `GPIOlibgpiod.o`
- –ö–æ–º–∞–Ω–¥–∞ `make clean`

### 4. –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å

**macOS –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- –ó–∞–≥–ª—É—à–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥ GPIO –æ–ø–µ—Ä–∞—Ü–∏–π
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Xcode

**Linux –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å libgpiod
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Linux GPIO API

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã

1. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è –Ω–∞ macOS:**
   - –í—Å–µ —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Ç–∏–ø–∞—Ö (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
   - –†–∞–±–æ—á–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã

2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
   - `./cc_chipid` - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ –∑–∞–≥–ª—É—à–∫–∏
   - GPIO –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
   - API –æ—Å—Ç–∞–ª—Å—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
   - –§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ GPIO –æ–ø–µ—Ä–∞—Ü–∏–∏** - libgpiod –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —è–¥–µ—Ä
- **–ú–µ–Ω—å—à–µ –∑–∞–¥–µ—Ä–∂–µ–∫** - –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ GPIO –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–ª–æ–µ–≤
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### üîí –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Linux GPIO API
- **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∞–≤–∞—Ä–∏–π–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

### üõ†Ô∏è –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **Raspberry Pi 5** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Bookworm OS** - –Ω–∞—Ç–∏–≤–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–ë—É–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏ Linux** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ API

### üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **macOS –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ Mac
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

### –î–ª—è Raspberry Pi 5:
```bash
sudo apt update
sudo apt install libgpiod-dev build-essential
make clean
make
```

### –î–ª—è macOS (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞):
```bash
xcode-select --install
make clean
make
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º

### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:
1. **–£–¥–∞–ª–∏—Ç—å wiringPi:**
   ```bash
   sudo apt remove wiringpi
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å libgpiod:**
   ```bash
   sudo apt install libgpiod-dev
   ```

3. **–ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:**
   ```bash
   make clean
   make
   ```

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
   ```bash
   ./cc_chipid
   ./cc_erase
   ```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### macOS:
- GPIO –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ –∑–∞–≥–ª—É—à–∫–∏
- –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Linux:
- –¢—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ GPIO
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É gpio

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú–∏–≥—Ä–∞—Ü–∏—è —Å `wiringPi` –Ω–∞ `libgpiod` —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å:

‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏  
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º—ã–π** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Raspberry Pi 5 –∏ Bookworm OS  
‚úÖ **–ù–∞–¥–µ–∂–Ω—ã–π** - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å GPIO  
‚úÖ **–†–∞–∑–≤–∏–≤–∞–µ–º—ã–π** - –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞  

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è. 